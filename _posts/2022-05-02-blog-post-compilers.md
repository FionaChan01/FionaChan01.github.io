---
title: 'FiFi‘s School Work: Compilers'
date: 2022-05-02
permalink: /posts/2022/05/blog-post-compilers/
tags:
  - CS
  - Knowledge
---

重庆大学计算机学院 ｜ 22Spring ｜ 编译原理

## 词法分析

## 语法分析

> 语法分析器使用词法分析器中生成的各个词法单元的第一个分量来创建树形的中间表示，利用其（多为语法树）给出词法单元流的语法结构

#### 语法树

每个内部节点代表一个运算，节点的子节点表示该运算的分量

## 语义分析

> 使用语法树和符号表中的信息来检查源程序是否和语言定义的语义一致，同时也收集类型信息

### Ⅰ 概念

- 句型：S 推倒出 α，而S是文法G的开始符号，则α是G的句型
- 句子：不包含非终结符号的句型
- 语言：文法生成的所有句子的集合
- 上下文无关语言：可以由文法生成的语言
- 等价文法：两个文法生成相同的语言

### Ⅱ 上下文无关文法

> 文法描述了大多数程序设计语言构造的层次化语法模型。
>
> 一个上下文无关文法由：一个终结符号集合（小写字母，运算符，标点符，数字，黑体字符串）、一个非终结符号集合（大写字母，小写、斜体的名字，字母表排在后面的小写字母，小写的希腊字母）、一个产生式集合和一个指定的非终结符号为开始符号组成。

#### 1. 二义性

> 一个文法可以为某个句子生成多棵语法分析树 <--> 对同一个句子有多个最左推导或最右推导的文法

#### 2. 两种推导过程

- 最左推导 Leftmost Deviation
	- 总是选择每个句型的最左非终结符号，写作$lm$
- 最右推导 Rightmost Deviation（规范推导）
	- 总是选择最右边的非终结符号，写作$rm$

#### 3. 语法分析树的常用构造方法

- 自顶向下的
	- 从语法树的顶部（根结点）开始向底部（叶子结点）构造语法分析树
	- 不能应用于带左递归文法的语法分析
- 自底向上的
	- 从叶子结点开始向根结点方向扫描构造语法分析树
	- “最右”推导

### Ⅲ 设计文法

#### 1. 二义性的消除

- 中间的语句不能以一个尚未匹配的语句结尾 P134

#### 2. 左递归的消除

> 如果一个文法中有一个非终结符号A使得对某个串å存在一个推导：A -> Aα，则称这个文法有左递归

- 如何替换

	- 直接左递归
		$$
		A -> Aα | ß    \   替换为：   A -> ßA'     ;\         A' -> αA' | ε
		$$

	- 间接左递归

		方法类似

	- 无环左递归

		![img](../post_image/post_compiler/GsyxIK.png)

#### 3. 左公因子的提取

> 一种文法转换方法，可以适用于预测分析技术或自顶向下分析技术的文法

- 对于产生式
	$$
	 A -> αβ_1 | αβ_2 | η 
	$$
	

- $$
	A -> αA | η';\ Α' -> β_1|β_2
	$$

	

#### 4. 非上下文无关语言的构造

> C、Java这种语言是非上下文无关的，因为都要求标识符先声明后使用，在这些语言的编译器中，标识符是否先声明后使用是在语义分析阶段检查的

### Ⅳ 自顶向下的语法分析

> 可以被看成为输入串构造语法分析树的问题：从根结点开始按照深度优先的场景语法分析树的各个节点（寻找最左推导过程）
>
> 🏆关键：确定对一个非终结符号应用哪一个产生式

#### 1. 递归下降的语法分析

> 由一组过程组成，每个非终结符号有一个对应的过程，程序的执行从开始符号对应的过程开始，如果这个过程的过程体扫描了整个输入串，他就停止并宣布语法分析完成

- 通用的递归下降分析可能需要回溯：最初选择产生式的时候不确定
- 左递归的文法会使递归下降的语法分析器进入一个无限循环♾️

#### 2. First 和 Follow





#### 语法错误的处理

- 策略
	- 恐慌模式
	- 短语层次恢复
- 错误恢复策略
	- 恐慌模式的恢复：语法分析器一旦发现错误就不断丢弃输入中的符号，知道找到同步词法单元集合中的某个元素
	- 短语层次的恢复：在余下的输入上进行局部性纠正
	- 错误产生式
	- 全局纠正

